
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hephaes</title>
  <!-- source of the font: https://www.fontsquirrel.com/fonts/Silkscreen -->
  <link rel="stylesheet" href="https://ipfs.io/ipfs/QmNvK39Yxm52GsWcJt44CzUE2ESJn2mWhJUbNze13X5dCF?filename=stylesheet.css" type="text/css" charset="utf-8" />
  <style>
    body {
        background-color: darkslategray;
        max-width: 100%;
        font-family: "Mono";
        color: rgb(255, 255, 255);
      }
    div.center {text-align:center;}
    .topBar {
      text-align: left;
    }
    a {color: white;}
    h1   {font-family: "silkscreennormal", Mono; color: rgb(255, 255, 255); text-align:center}
    h2   {font-family: "Mono";color: rgb(255, 255, 255); text-align:center}
    h3   {font-family: "Mono";color: rgb(255, 255, 255); text-align:center}
    p    {font-family: "Mono";color: rgb(255, 255, 255);}
    p.center {text-align:center}
    .instBtn {
      background-color: rgb(100, 100, 100);
      border: none;
      color: white; 
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 4px;
      width: 30%;}
    .instBtn:hover {background-color: rgb(75, 75, 75);}
    .bGo {
      background-color: rgb(100, 100, 100);
      border: none;
      color: white; 
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 4px;
      width: 10%;}
    .bGo:hover {background-color: rgb(75, 75, 75);}
    table.center {
      margin-left: auto;
      margin-right: auto;
    }
    #infoTb td {
      padding: 15px;
      color: white;
      text-align: center;
      border: 1px solid white;
      border-radius: 10px;
    }
    td.HowToHead {writing-mode: vertical-rl;}
    footer {
        display:flex;
        justify-content: center;
        font-family: "Mono";
        color: rgb(255, 255, 255);
        text-align: center;
        padding: 200px;
      }
    input {
      width: 70%;
      padding: 12px 20px;
      border-radius: 10px;
      text-align: center;
      background-color: gray;
      color: white;
    }
    ::placeholder {
      text-align:center;
      color: white;
    }
    ol {text-align: left; padding-left: 20%; padding-right: 20%;}
  </style>
</head>
<body>
    <div id="div_main">
      <p id="topBar">
        <a href="javascript:ch_page('about');" id="about">About</a> <a href="javascript:ch_page('howToUse');" id="howToUse">How to use it</a>
      </p>
      <a href="javascript:ch_page('title');" style="text-decoration:none"><h1 id="title">Hephaes</h1></a>
      <p id="pMotto" class="center">multitool - in a single line of text</p>
    </div>
      <div id="div_1" class="center">
        <input id="theText" name="the-text" type="text" placeholder="You question / command here ...">
        <br id="b1">
        <button class="bGo" id="btnGo">Go</button>
        <p id="p2"></p>
      </div>
      <footer>
        Author:  <a href="https://github.com/heEXDe" target="_blank" style="text-decoration:none">https://github.com/heEXDe</a>
      </footer>
</body>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.9.1/math.js'></script>
<script>

//eventlisteners
document.getElementById('btnGo').addEventListener('click', function(){ chooseAction(document.getElementById("theText").value);});
document.getElementById('about').addEventListener('click', function(){ ch_page("about");});
document.getElementById('howToUse').addEventListener('click', function(){ ch_page("howToUse");});

// get & create buttons
var hHowToUseIt = document.createElement("p");
var aboutText = document.createElement("p");
var theText = document.getElementById("theText");
var btnGo = document.getElementById("btnGo");
var b1 = document.getElementById("b1");
var p2 = document.getElementById("p2");

// content for 'how to use' and 'about' pages
hHowToUseIt.innerHTML = "<h2>How to use it:</h2><br> <table id=\"infoTb\" class=\"center\"><tr><td class=\"HowToHead\" rowspan=\"2\">Books</td><td>example: </td><td>book lord of the rings</td></tr><tr><td>to start searching for a book: </td><td>book</td></tr><tr><td class=\"HowToHead\" rowspan=\"13\">Mathematics</td><td>example: </td><td>= 2*3.12 + 11.5/1.34</td></tr><tr><td>to start with mathematics: </td><td>=</td></tr><tr><td>addition: </td><td>+</td></tr><tr><td>substraction: </td><td>-</td></tr>   <tr><td>multiplication: </td><td>*</td></tr><tr><td>division: </td><td>/</td></tr><tr><td>exponentiation: </td><td>^</td></tr><tr><td>n-th root: </d><td>^(1/n)</td></tr><tr><td>logarithm: </td><td>log(x) - natural log.<br>loga(b) - of 'b' to base 'a'</td></tr><tr><td>trigonometric functions: </td><td>sin([degrees] deg) <br> cos([degrees] deg) <br> tan([degrees] deg) <br> cot([degrees] deg)</td></tr><tr><td>derivative: </td><td>_derivative_[variable]_[function (no spaces)] <br> example: = derivative x x^4-x</td></tr><tr><td>factorial: </td><td>[number]! <br> example: = 9!</td></tr><tr><td>determinant of <br> a matrix: </td><td>det([num1A, ..., numNA; num1B, ..., numNB]) <br> example: = det([1, 4; 3, 1])</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Random password / <br> string generator</td><td>to generate a password / <br> string of the desired length: </td><td>random_[the length of the password]_sc(optional)<br>sc - special characters</td></tr><tr><td>example: </td><td>random 12<br>or<br>random 15 sc</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Currency converter</td><td>to convert currency A to B: </td><td>currency_[A]_to_[B]</td></tr><tr><td>example: </td><td>currency USD to EUR</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Unit converter</td><td>to convert unit A to B: <br> (m to in, ft, yd, mi) <br> (in to cm, m)<br> (kg to oz, lb)</td><td>unitconv_[A]_to_[B]<br>or<br>= [unit A] to [unit B]</td></tr><tr><td>example: </td><td>unitconv 5.5 m to in<br>or<br>= 150 lbs to kg</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Search engine</td><td>to search the web: </td><td>search_[the search]</td></tr><tr><td>example: </td><td>search USA population</td></tr></table>";
aboutText.innerHTML = "<h3>About</h3><br><hr>Hephaes (from the Greek god of artisans, blacksmiths, carpenters, craftsmen, metallurgy, metalworking and sculpture - Hephaestus) is a multifunctional open source tool. Multifunctional? Yes, or at least that's the ultimate intent of the project. The number of available functions will grow over time.<br><hr><ol id=\"olAbout\"><li>open source: <a href=\"https://github.com/heEXDe/hephaes\" target=\"_blank\">https://github.com/heEXDe/hephaes</a></li><li>Mathematics: basic operations (addition, subtraction, multiplication, division, multiplication, roots, logarithms), trigonometric functions, calculate derivatives</li><li>Books: find search results by book titles in the Open Library (<a href=\"https://openlibrary.org/\"  target=\"_blank\">https://openlibrary.org/</a>) database</li><li>Random generator: generate a random string / password</li><li>Currency converter: convert one currency to the other</li><li>Units of measure converter: convert meters, inches and kilograms to pounds, inches, yards, miles, ounces and feet</li><li>Search engine (redirection to Brave Search): search the web using privacy preserving search engine - <a href=\"https://search.brave.com/\"  target=\"_blank\">Brave Search</a></li></ol>";

// set id for elements
hHowToUseIt.setAttribute("id", "hHowToUseIt");
aboutText.setAttribute("id", "aboutText");

function ch_page(eleChoosen){
  switch (eleChoosen){
    case "title":
    while (div_1.firstChild) {div_1.removeChild(div_1.firstChild);};
    div_1.append(theText, b1, btnGo, p2);
    p2.innerText = '';
    theText.value = '';
    break;
    case "about":
    while (div_1.firstChild) {div_1.removeChild(div_1.firstChild);};
      div_1.append(aboutText);
    break;
    case "howToUse":
    while (div_1.firstChild) {div_1.removeChild(div_1.firstChild);};
      div_1.append(hHowToUseIt);
    break;
  }
}
// fn to choose the action to perform
function chooseAction(text){
  try{
  p2.innerHTML = 'Processing ...';
  if (text.charAt(0) == "="){
    mathematics(text);
  } else if (text.split(' ')[0] == "weather"){
    weather(text);
  } else if (text.split(' ')[0] == "book"){
    book(text);
  } else if (text.split(' ')[0] == "random"){
    randomFn(text);
  } else if (text.split(' ')[0] == "currency"){
    curConv(text);
  } else if(text.split(' ')[0] == "unitconv"){
    uniConv(text);
  } else if(text.split(' ')[0] == "search"){
    search(text);
  } else {
    p2.innerHTML = 'Uncorrect command.';
  }
  } catch {p2.innerHTML = 'Error!';}
}
// fn to perform mathematical calculations
function mathematics(x){
  switch (x.split(' ')[1]){
    case 'derivative':
      p2.innerHTML = math.derivative(x.split(' ')[3], x.split(' ')[2]);
      break;
    default:
      p2.innerHTML = math.evaluate(x.slice(1));
  }
}
// fn to get a link to search results in the OpenLibrary
function book(x){
  let a = x.slice(5).trim().replace(/\s/g, '%20');
  let url = `https://openlibrary.org/search.json?q=${x.slice(5).trim()}`;
  p2.innerHTML = "Results on the OpenLibrary website: <br>" + `<a href=\"https://openlibrary.org/search?q=${a}&mode=everything" target=\"_blank\" style=\"text-decoration:none\">https://openlibrary.org/search?q=${a}&mode=everything</a>`
}
// fn to get current weather - not working
function weather(x){ 
  let a = x.slice(8);
  let url = ``;
  //making a request to the API
  fetch(url)
  .then((response) => response.json())
  .then((json) => p2.innerHTML = `current weather: ${json}`)
  .catch(function (error){console.error(`Error fetching data: ${error.message}`)});
}
// fn to generate random string / password
function randomFn(x){
  let result = '';
  if(x.split(' ')[2] == 'sc'){
    for (let i=0; i<x.split(' ')[1]; i++){
    result += 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789?!*%@#&^$'.charAt(Math.floor(Math.random() * 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!*%@#&^$'.length));
  };
  } else {
    for (let i=0; i<x.split(' ')[1]; i++){
    result += 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.charAt(Math.floor(Math.random() * 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.length));
  };
  }
  
  p2.innerHTML = result;
}
// fn to convert one currency to another
function curConv(x){
  let url = `https://api.exchangerate.host/convert?from=${x.split(' ')[1]}&to=${x.split(' ')[3]}`;
  //making a request to the API
  fetch(url)
  .then((response) => response.json())
  .then((json) => p2.innerHTML = `1 ${x.split(' ')[1]} = ${json["result"]} ${x.split(' ')[3]}`)
  .catch(function (error){console.error(`Error fetching data: ${error.message}`)});
}
// fn to convert units of measure
function uniConv(x){
  try{
    switch (x.split(' ')[2]){
    case 'm':
      switch (x.split(' ')[4]){
        case 'in': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 39.370) / 100} in`; break;
        case 'ft': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 3.2808) / 100} ft`; break;
        case 'yd': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 1.0936) / 100} yd`; break;
        case 'mi': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 0.00062137) / 100} mi`; break;
      };
      break;
    case 'in':
    switch (x.split(' ')[4]){
      case 'cm': p2.innerHTML = `${x.split(' ')[1]} in = ${(Number(x.split(' ')[1]) * 100 / 0.39370) / 100} cm`; break;
      case 'm': p2.innerHTML = `${x.split(' ')[1]} in = ${(Number(x.split(' ')[1]) * 100 / 39.370) / 100} m`; break;
    };
      break;
    case 'kg':
    switch (x.split(' ')[4]){
      case 'lb': p2.innerHTML = `${x.split(' ')[1]} kg = ${(Number(x.split(' ')[1]) * 100 * 2.204623) / 100} lb`; break;
      case 'oz': p2.innerHTML = `${x.split(' ')[1]} kg = ${(Number(x.split(' ')[1]) * 100 * 35.27396) / 100} oz`; break;
    };
      break;
    default:
    p2.innerHTML = 'Uncorrect command.';
  }
  } catch (error){
    p2.innerHTML = 'Error.';
    console.log(error);
  }
}
function search(x){
  let a = x.slice(7).trim().replace(/[+]/g, '%2B').replace(/\s/g, '+');
  p2.innerHTML = "Results from the Brave Search: <br>" + `<a href=\"https://search.brave.com/search?q=${a}" target=\"_blank\" style=\"text-decoration:none\">https://search.brave.com/search?q=${a}</a>`
}
</script>
</html>

