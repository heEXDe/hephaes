
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hephaes</title>
  <!-- source of the font: https://www.fontsquirrel.com/fonts/Silkscreen -->
  <!-- <link rel="stylesheet" href="https://bafybeiait6atbrur3zr3mdny3qed26kj2d2s5e5qbl2dqhxqojlxpxkg3q.ipfs.dweb.link/?filename=stylesheet.css" type="text/css" charset="utf-8"/> -->
  <!-- GitHub logo for the footer-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <!-- for Bootstrap-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
    @font-face {
    font-family: 'silkscreennormal';
    src: url('slkscr-webfont.eot');
    src: url('slkscr-webfont.eot?#iefix') format('embedded-opentype'),
         url('slkscr-webfont.woff2') format('woff2'),
         /* url('https://ipfs.io/ipfs/Qmd7JmS1mZwYbzDCeJUGaw2eaVtEvTdwNohtUG39uH97kN?filename=slkscr-webfont.woff') format('woff'),*/
         url('https://arweave.net/YfjFeKRdj7hl1CDfkDzmXRv1eB2XekBPqF8-ei1b01Y') format('woff'),
         url('slkscr-webfont.ttf') format('truetype'),
         url('slkscr-webfont.svg#silkscreennormal') format('svg');
    font-weight: normal;
    font-style: normal;
  }
  h1   {font-family: "silkscreennormal", Mono;}
  </style>
</head>
<body class="container-fluid bg-secondary text-center text-white">
  <div>
    <div id="div_main">
      <p id="topBar">
        <a href="javascript:ch_page('about');" id="about" style="text-decoration:none" class="text-white">About</a> | <a href="javascript:ch_page('howToUse');" id="howToUse" style="text-decoration:none" class="text-white">How to use it</a>
      </p>
      <a href="javascript:ch_page('title');" style="text-decoration:none" class="text-white"><h1>Hephaes</h1></a>
      <h4 id="pMotto">multitool - in a single line of text</h3>
    </div>
      <div id="div_1">
        <input id="theText" name="the-text" type="text" placeholder="Your question / command here ...">
        <br id="b1">
        <button id="btnGo">Go</button>
        <p id="p2"></p>
      </div>
    </div>
      <footer>
        <a href="https://github.com/heEXDe/hephaes" target="_blank" class="text-white">
          <i class="fa fa-github fa-3x"></i>
        </a>
      </footer>
      <!-- for Bootstrap-->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.9.1/math.js'></script>
<script>

//eventlisteners
document.getElementById('btnGo').addEventListener('click', function(){ chooseAction(document.getElementById("theText").value);});
document.getElementById('theText').addEventListener('keypress', function(event){ if (event.key === "Enter") {chooseAction(document.getElementById("theText").value);}});
document.getElementById('about').addEventListener('click', function(){ ch_page("about");});
document.getElementById('howToUse').addEventListener('click', function(){ ch_page("howToUse");});

// get & create buttons
var hHowToUseIt = document.createElement("p");
var aboutText = document.createElement("p");
var theText = document.getElementById("theText");
var btnGo = document.getElementById("btnGo");
var b1 = document.getElementById("b1");
var p2 = document.getElementById("p2");

// content for 'how to use' and 'about' pages
hHowToUseIt.innerHTML = "<h3>How to use it:</h3><br> <table id=\"infoTab\" class=\"text-center\"><tr><td class=\"HowToHead\" rowspan=\"2\">Books</td><td>example: </td><td>book lord of the rings</td></tr><tr><td>to start searching for a book: </td><td>book</td></tr><tr><td class=\"HowToHead\" rowspan=\"13\">Mathematics</td><td>example: </td><td>= 2*3.12 + 11.5/1.34</td></tr><tr><td>to start with mathematics: </td><td>=</td></tr><tr><td>addition: </td><td>+</td></tr><tr><td>substraction: </td><td>-</td></tr>   <tr><td>multiplication: </td><td>*</td></tr><tr><td>division: </td><td>/</td></tr><tr><td>exponentiation: </td><td>^</td></tr><tr><td>n-th root: </d><td>^(1/n)</td></tr><tr><td>logarithm: </td><td>log(x) - natural log.<br>loga(b) - of 'b' to base 'a'</td></tr><tr><td>trigonometric functions: </td><td>sin([degrees] deg) <br> cos([degrees] deg) <br> tan([degrees] deg) <br> cot([degrees] deg)</td></tr><tr><td>derivative: </td><td>_derivative_[variable]_[function (no spaces)] <br> example: = derivative x x^4-x</td></tr><tr><td>factorial: </td><td>[number]! <br> example: = 9!</td></tr><tr><td>determinant of <br> a matrix: </td><td>det([num1A, ..., numNA; num1B, ..., numNB]) <br> example: = det([1, 4; 3, 1])</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Random password / <br> string generator</td><td>to generate a password / <br> string of the desired length: </td><td>random_[the length of the password]_sc(optional)<br>sc - special characters</td></tr><tr><td>example: </td><td>random 12<br>or<br>random 15 sc</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Currency converter</td><td>to convert currency A to B: </td><td>currency_[amount]_[A]_to_[B]</td></tr><tr><td>example: </td><td>currency 10 USD to EUR</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Unit converter</td><td>to convert unit A to B: <br> (m to in, ft, yd, mi) <br> (in to cm, m)<br> (kg to oz, lb)</td><td>unitconv_[A]_to_[B]<br>or<br>= [unit A] to [unit B]</td></tr><tr><td>example: </td><td>unitconv 5.5 m to in<br>or<br>= 150 lbs to kg</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Search engine</td><td>to search the web: </td><td>search_[the search]</td></tr><tr><td>example: </td><td>search USA population</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Weather</td><td>get the temperature, cloud <br> cover, and rain <br> for the indicated location <br> (geographic coordinate system)<br>for the current day: </td><td>weather_[latitude]_[longitude]</td></tr><tr><td>example: </td><td>weather 50.0 14.0</td></tr><tr><td class=\"HowToHead\" rowspan=\"2\">Arweave functionality</td><td>generate for your file <br> links to few alternative Aweave gateways: </td><td>awl_[original link to your file]</td></tr><tr><td>display link for your file <br> using a working gateway: </td><td>agc_[original link to your file]</td></tr></table>";
aboutText.innerHTML = "<h3>About</h3><br><hr>Hephaes (from the Greek god of artisans, blacksmiths, carpenters, craftsmen, metallurgy, metalworking and sculpture - Hephaestus) is a multifunctional open source tool. Multifunctional? Yes, or at least that's the ultimate intent of the project. The number of available functions will grow over time.<br><hr><div class=\"tiles\"><div class=\"oneTile\"><p>open source: <br><a href=\"https://github.com/heEXDe/hephaes\" target=\"_blank\">GitHub</a></p></div><div class=\"oneTile\"><p>Mathematics: <br> basic operations (addition, subtraction, multiplication, division, multiplication, roots, logarithms), trigonometric functions, calculate derivatives</p></div><div class=\"oneTile\"><p>Books: <br> find search results by book titles in the Open Library (<a href=\"https://openlibrary.org/\"  target=\"_blank\">Open Library</a>) database</p></div><div class=\"oneTile\"><p>Random generator: <br> generate a random string / password</p></div><div class=\"oneTile\"><p>Currency converter: <br> convert one currency to the other</p></div><div class=\"oneTile\"><p>Units of measure converter: <br> convert meters, inches and kilograms to pounds, inches, yards, miles, ounces and feet</p></div><div class=\"oneTile\"><p>Search engine (redirection to Brave Search): <br> search the web using privacy preserving search engine - <a href=\"https://search.brave.com/\"  target=\"_blank\">Brave Search</a></p></div><div class=\"oneTile\"><p>Weather: <br> get the temperature, cloud <br> cover, and rain <br> for the indicated location <br> (geographic coordinate system)</p></div><div class=\"oneTile\"><p>Decentralized <br> file system <br> (Arweave): <br> 1. check gateways availability <br> 2. generate alternative links <br> for your file</p></div></div>";

// set id for elements
hHowToUseIt.setAttribute("id", "hHowToUseIt");
aboutText.setAttribute("id", "aboutText");

function ch_page(eleChoosen){
  switch (eleChoosen){
    case "title":
    while (div_1.firstChild) {div_1.removeChild(div_1.firstChild);};
    div_1.append(theText, b1, btnGo, p2);
    document.getElementById("p2").className = "p2v1";
    p2.innerText = '';
    theText.value = '';
    break;
    case "about":
    while (div_1.firstChild) {div_1.removeChild(div_1.firstChild);};
      div_1.append(aboutText);
    break;
    case "howToUse":
    while (div_1.firstChild) {div_1.removeChild(div_1.firstChild);};
      div_1.append(hHowToUseIt);
    break;
  }
}
// fn to choose the action to perform
function chooseAction(text){
  text = text.split(' ').filter((a) => a !== "").join(' ');
  try{
  document.getElementById("p2").className = "p2v2";
  p2.innerHTML = 'Processing ...';
  if (text.charAt(0) == "="){
    mathematics(text);
  } else if (text.split(' ')[0] == "weather"){
    weather(text);
  } else if (text.split(' ')[0] == "book"){
    book(text);
  } else if (text.split(' ')[0] == "random"){
    randomFn(text);
  } else if (text.split(' ')[0] == "currency"){
    curConv(text);
  } else if(text.split(' ')[0] == "unitconv"){
    uniConv(text);
  } else if(text.split(' ')[0] == "search"){
    search(text);
  } else if(text.split(' ')[0] == "agc"){
    agc(text);
  } else if(text.split(' ')[0] == "awl"){
    awl(text);
  } else {
    p2.innerHTML = 'Uncorrect command.';
  }
  } catch {p2.innerHTML = 'Error!';}
}
// fn to perform mathematical calculations
function mathematics(x){
  // document.getElementById("p2").className = "oneTile";
  switch (x.split(' ')[1]){
    case 'derivative':
      p2.innerHTML = math.derivative(x.split(' ')[3], x.split(' ')[2]);
      break;
    default:
      p2.innerHTML = Math.round((math.evaluate(x.slice(1)) + Number.EPSILON) * 10000) / 10000;
  }
}
// fn to get a link to search results in the OpenLibrary
function book(x){
  let a = x.slice(5).trim().replace(/\s/g, '%20');
  let url = `https://openlibrary.org/search.json?q=${x.slice(5).trim()}`;
  // document.getElementById("p2").className = "oneTile";
  p2.innerHTML = "Results on the OpenLibrary website: <br>" + `<a href=\"https://openlibrary.org/search?q=${a}&mode=everything" target=\"_blank\" style=\"text-decoration:none\">https://openlibrary.org/search?q=${a}&mode=everything</a>`
}
// fn to get current weather - not working
function weather(x){ 
  let url = `https://api.open-meteo.com/v1/forecast?latitude=${x.split(' ')[1]}&longitude=${x.split(' ')[2]}&hourly=temperature_2m,apparent_temperature,rain,cloud_cover&forecast_days=1`;
  //making a request to the API
  fetch(url)
  .then((response) => response.json())
  .then((json) =>  {
    let weatherStrTable = `<table id=\"weatherTab\" class=\"center\"><tr><td>time (hours)</td><td>temperature (&#8451;)</td><td>apparent temperature (&#8451;)</td><td>cloud cover (%)</td><td>rain (mm)</td></tr>`;
    for(let i=0; i<json["hourly"]["apparent_temperature"].length; i++){weatherStrTable = weatherStrTable + ` <tr>
    <td>${json["hourly"]["time"][i].split('T')[0]}<br>${json["hourly"]["time"][i].split('T')[1]}</td> 
    <td>${json["hourly"]["temperature_2m"][i]}</td>
    <td>${json["hourly"]["apparent_temperature"][i]}</td>
    <td>${json["hourly"]["cloud_cover"][i]}</td>
    <td>${json["hourly"]["rain"][i]}</td>
    </tr> `;}
    weatherStrTable = weatherStrTable + `</table><br><a href=\"https://open-meteo.com/\" target=\"_blank\">Weather data by Open-Meteo.com</a><br>(<a href=\"https://github.com/open-meteo/open-meteo/\" target=\"_blank\">GitHub</a>)`;
    p2.innerHTML = weatherStrTable;    
    console.log(json)
  })
  .catch(function (error){console.error(`Error fetching data: ${error.message}`)});
}
// fn to generate random string / password
function randomFn(x){
  let result = '';
  if(x.split(' ')[2] == 'sc'){
    for (let i=0; i<x.split(' ')[1]; i++){
    result += 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789?!*%@#&^$'.charAt(Math.floor(Math.random() * 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!*%@#&^$'.length));
  };
  } else {
    for (let i=0; i<x.split(' ')[1]; i++){
    result += 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.charAt(Math.floor(Math.random() * 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.length));
  };
  }
  //document.getElementById("p2").className = "oneTile";
  p2.innerHTML = result;
}
// fn to convert one currency to another
function curConv(x){
  //document.getElementById("p2").className = "oneTile";
  //making a request to the API
  fetch(`https://api.frankfurter.app/latest?amount=${x.split(' ')[1]}&from=${x.split(' ')[2]}&to=${x.split(' ')[4]}`)
  .then((response) => response.json())
  .then((json) => p2.innerHTML = `${x.split(' ')[1]} ${x.split(' ')[2]} = ${Object.values(json["rates"])[0]} ${x.split(' ')[4]}`)
  .catch(function (error){console.error(`Error fetching data: ${error.message}`); p2.innerHTML = 'Error!';});
}
// fn to convert units of measure
function uniConv(x){
  try{
    switch (x.split(' ')[2]){
    case 'm':
      switch (x.split(' ')[4]){
        case 'in': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 39.370) / 100} in`; break;
        case 'ft': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 3.2808) / 100} ft`; break;
        case 'yd': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 1.0936) / 100} yd`; break;
        case 'mi': p2.innerHTML = `${x.split(' ')[1]} m = ${(Number(x.split(' ')[1]) * 100 * 0.00062137) / 100} mi`; break;
      };
      break;
    case 'in':
    switch (x.split(' ')[4]){
      case 'cm': p2.innerHTML = `${x.split(' ')[1]} in = ${(Number(x.split(' ')[1]) * 100 / 0.39370) / 100} cm`; break;
      case 'm': p2.innerHTML = `${x.split(' ')[1]} in = ${(Number(x.split(' ')[1]) * 100 / 39.370) / 100} m`; break;
    };
      break;
    case 'kg':
    switch (x.split(' ')[4]){
      case 'lb': p2.innerHTML = `${x.split(' ')[1]} kg = ${(Number(x.split(' ')[1]) * 100 * 2.204623) / 100} lb`; break;
      case 'oz': p2.innerHTML = `${x.split(' ')[1]} kg = ${(Number(x.split(' ')[1]) * 100 * 35.27396) / 100} oz`; break;
    };
      break;
    default:
    p2.innerHTML = 'Uncorrect command.';
  }
  } catch (error){
    p2.innerHTML = 'Error.';
    console.log(error);
  }
}
// fn generating a link to serach results from Brave search engine, for the provided search phrase
function search(x){
  let a = x.slice(7).trim().replace(/[+]/g, '%2B').replace(/\s/g, '+');
  p2.innerHTML = "Results from the Brave Search: <br>" + `<a href=\"https://search.brave.com/search?q=${a}" target=\"_blank\" style=\"text-decoration:none\">https://search.brave.com/search?q=${a}</a>`
}
// fn checking if a file on the Arweave network is accessible through gateways other than the one specified in the input link
function agc(x){
  let gates = ["ar-io.dev", "permagate.io", "vilenarios.com", "arbr.pro", "wvm-gateway.xyz", "love4src.com", "gatewaypie.com"]
  async function isWebsiteAvailable(url) {
  try {
    const response = await fetch(url);
    if (response.status === 200) {
      return true;
    } else {
      return false;
    }
  } catch (error) {
    return false;
  }
}

  for(gate in gates){
    if(isWebsiteAvailable(x.split(' ')[1].replace(/\.(.*)\//, "." + gates[gate] + "/"))){
      p2.innerHTML = `<a href=${x.split(' ')[1].replace(/\.(.*)\//, "." + gates[gate] + "/")} target=\"_blank\" style=\"text-decoration:none\">${x.split(' ')[1].replace(/\.(.*)\//, "." + gates[gate] + "/")}</a>`
      break;
    }
  }
}
// fn generating links to few alternative Arweave gateways, for the provided Arweave link
function awl(x){
  let gates = ["ar-io.dev", "permagate.io", "vilenarios.com", "arbr.pro", "wvm-gateway.xyz", "love4src.com", "gatewaypie.com"];
  let links = [];
  for(gate in gates){
    links.push(x.split(' ')[1].replace(/\.(.*)\//, "." + gates[gate] + "/"));
  }
  // displaying the links and adding the 'Copy' button
  p2.innerHTML = links.join('<br>')  + "<br><button id=\"btnCopy\">Copy</button>"
  // fn to copy the links to the OS clipboard
  document.getElementById('btnCopy').addEventListener('click', function(){navigator.clipboard.writeText(links.join(' \n '));});
}
</script>
</html>

